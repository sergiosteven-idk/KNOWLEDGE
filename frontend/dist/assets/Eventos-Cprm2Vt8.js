import{r,u as p,j as e,C as u,L as h,B as y,d}from"./index-Bd0lDEMI.js";import{C as j}from"./Card-BLZ6b7c_.js";import{L as f}from"./Loader-BnLytqHI.js";const w=()=>{const[o,l]=r.useState([]),[a,i]=r.useState(!0),[n,c]=r.useState(""),{highContrast:N,darkMode:b}=p(),m=localStorage.getItem("token")||"",x=JSON.parse(localStorage.getItem("usuario")||"{}");r.useEffect(()=>{(async()=>{try{i(!0);const s=await d.get("http://localhost:5000/api/eventos");l(s.data),c("")}catch{c("No se pudieron cargar los eventos. Por favor intenta m√°s tarde.")}finally{i(!1)}})()},[]);const g=async t=>{try{await d.post("http://localhost:5000/api/eventos/registrar",{id_usuario:x.id,id_evento:t},{headers:{Authorization:`Bearer ${m}`}}),alert("‚úÖ Te has inscrito al evento correctamente.")}catch{alert("‚ùå Error al registrarse en el evento.")}};return e.jsx(u,{children:e.jsxs("main",{className:"py-6 md:py-8",children:[e.jsxs("section",{className:"text-center mb-8 md:mb-12 px-4 animate-fade-in",children:[e.jsx(h,{size:60,className:"md:w-20 md:h-20 mx-auto"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-knowledge-purple mt-4 md:mt-6 mb-2 md:mb-3",children:"Eventos Comunitarios"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto text-sm md:text-base px-2",children:"√önete a nuestros eventos y conecta con la comunidad. Aprende, participa y crece junto a otros."})]}),a&&e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(f,{})}),n&&!a&&e.jsx("div",{className:"mx-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-4 text-red-700 dark:text-red-300 text-center text-sm md:text-base",children:n}),!a&&o.length>0&&e.jsx("div",{className:"grid gap-5 md:gap-6 sm:grid-cols-2 lg:grid-cols-3 px-4",children:o.map((t,s)=>e.jsxs(j,{title:t.titulo,className:`animate-fade-in-delay-${s%3+1}`,footer:e.jsx(y,{variant:"primary",onClick:()=>g(t.id_evento),className:"w-full min-h-11",children:"Inscribirme"}),children:[t.imagen_url&&e.jsx("img",{src:t.imagen_url,alt:t.titulo,className:"rounded-lg mb-4 w-full h-32 md:h-40 object-cover"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 text-sm",children:t.descripcion}),e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{className:"font-medium",children:["üìÖ ",new Date(t.fecha_inicio).toLocaleDateString("es-ES")]}),e.jsxs("p",{className:"font-medium",children:["üìç ",t.ubicacion||"Virtual"]})]})]},t.id_evento))}),!a&&o.length===0&&!n&&e.jsx("div",{className:"text-center py-12 px-4",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No hay eventos disponibles en este momento."})})]})})};export{w as default};
