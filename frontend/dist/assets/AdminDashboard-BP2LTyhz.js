import{r as o,j as e,d as x,u as p,e as m}from"./index-Bd0lDEMI.js";const b=()=>{const[i,l]=o.useState([]),[a,d]=o.useState(!0),s=localStorage.getItem("token")||"",n=async()=>{try{const r=await x.get("http://localhost:5000/api/admin/contenidos",{headers:{Authorization:`Bearer ${s}`}});l(r.data)}catch(r){console.error("âŒ Error al obtener contenidos:",r)}finally{d(!1)}};o.useEffect(()=>{n()},[]);const c=async r=>{if(window.confirm("Â¿Aprobar este contenido?"))try{await x.put(`http://localhost:5000/api/admin/contenido/${r}/aprobar`,{},{headers:{Authorization:`Bearer ${s}`}}),alert("âœ… Contenido aprobado correctamente."),n()}catch(h){console.error("âŒ Error al aprobar contenido:",h),alert("Error al aprobar el contenido.")}},t=async r=>{if(window.confirm("Â¿Rechazar este contenido?"))try{await x.put(`http://localhost:5000/api/admin/contenido/${r}/rechazar`,{},{headers:{Authorization:`Bearer ${s}`}}),alert("âŒ Contenido rechazado."),n()}catch(h){console.error("âŒ Error al rechazar contenido:",h),alert("Error al rechazar el contenido.")}},g=async r=>{if(window.confirm("Â¿Eliminar este contenido permanentemente?"))try{await x.delete(`http://localhost:5000/api/admin/contenido/${r}`,{headers:{Authorization:`Bearer ${s}`}}),alert("ðŸ—‘ï¸ Contenido eliminado correctamente."),n()}catch(h){console.error("âŒ Error al eliminar contenido:",h),alert("Error al eliminar el contenido.")}};return a?e.jsx("div",{className:"text-center mt-10 text-knowledge-purple/80 animate-pulse",children:"Cargando contenidos..."}):e.jsxs("div",{className:"px-4 sm:px-8 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-knowledge-purple mb-6 text-center",children:"GestiÃ³n de Contenidos"}),i.length===0?e.jsx("p",{className:"text-center text-gray-400",children:"No hay contenidos en el sistema."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-700 rounded-lg overflow-hidden shadow-lg",children:[e.jsx("thead",{className:"bg-knowledge-purple text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border border-gray-700",children:"TÃ­tulo"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Tipo"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Autor"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Estado"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Nivel"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Fecha"}),e.jsx("th",{className:"p-3 border border-gray-700",children:"Acciones"})]})}),e.jsx("tbody",{children:i.map(r=>e.jsxs("tr",{className:"text-center bg-gray-900 text-gray-200 hover:bg-gray-800 transition",children:[e.jsx("td",{className:"p-2 border border-gray-700",children:r.titulo}),e.jsx("td",{className:"p-2 border border-gray-700 capitalize",children:r.tipo||"â€”"}),e.jsx("td",{className:"p-2 border border-gray-700",children:r.autor||"AnÃ³nimo"}),e.jsx("td",{className:`p-2 border font-semibold ${r.estado==="aprobado"?"text-green-400":r.estado==="pendiente"?"text-yellow-400":"text-red-400"}`,children:r.estado}),e.jsx("td",{className:"p-2 border border-gray-700",children:r.nivel_dificultad||"â€”"}),e.jsx("td",{className:"p-2 border border-gray-700",children:r.fecha_publicacion||"â€”"}),e.jsxs("td",{className:"p-2 border border-gray-700 space-x-2",children:[r.estado!=="aprobado"&&e.jsx("button",{onClick:()=>c(r.id_contenido),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-md",children:"Aprobar"}),r.estado!=="rechazado"&&e.jsx("button",{onClick:()=>t(r.id_contenido),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-md",children:"Rechazar"}),e.jsx("button",{onClick:()=>g(r.id_contenido),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md",children:"Eliminar"})]})]},r.id_contenido))})]})})]})},u=()=>{const{darkMode:i,highContrast:l}=p(),[a,d]=o.useState([]),[s,n]=o.useState(!0),c=async()=>{try{const t=await m.get("/admin/usuarios");d(t.data)}catch(t){console.error("Error al obtener usuarios:",t)}finally{n(!1)}};return o.useEffect(()=>{c()},[]),e.jsxs("div",{className:`p-6 rounded-lg shadow transition ${l?"bg-yellow-50 text-black":i?"bg-gray-900 text-white":"bg-white text-gray-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-knowledge-purple",children:"Usuarios registrados"}),s?e.jsx("p",{className:"text-center",children:"Cargando usuarios..."}):a.length===0?e.jsx("p",{className:"text-center",children:"No hay usuarios registrados."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx("thead",{className:"bg-knowledge-purple text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Nombre"}),e.jsx("th",{className:"p-2 border",children:"Correo"}),e.jsx("th",{className:"p-2 border",children:"Rol"}),e.jsx("th",{className:"p-2 border",children:"Estado"}),e.jsx("th",{className:"p-2 border",children:"Fecha Registro"})]})}),e.jsx("tbody",{children:a.map(t=>e.jsxs("tr",{className:"text-center bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"p-2 border",children:t.nombre_completo}),e.jsx("td",{className:"p-2 border",children:t.correo}),e.jsx("td",{className:"p-2 border capitalize",children:t.tipo_usuario}),e.jsx("td",{className:"p-2 border",children:t.activo?e.jsx("span",{className:"text-green-600 font-semibold",children:"Activo"}):e.jsx("span",{className:"text-red-600 font-semibold",children:"Inactivo"})}),e.jsx("td",{className:"p-2 border text-xs",children:new Date(t.fecha_registro).toLocaleString("es-ES")})]},t.id_usuario))})]})})]})},y=()=>{const{darkMode:i,highContrast:l}=p(),[a,d]=o.useState("usuarios"),[s,n]=o.useState({usuarios:0,contenidos:0,promedio_progreso:0}),[c,t]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const r=await m.get("/admin/estadisticas");n(r.data)}catch(r){console.error("âŒ Error al cargar estadÃ­sticas:",r)}finally{t(!1)}})()},[]),e.jsxs("div",{className:`min-h-screen p-6 transition ${l?"bg-yellow-50 text-black":i?"bg-gray-900 text-white":"bg-white text-gray-800"}`,children:[e.jsx("h1",{className:"text-3xl font-bold text-knowledge-purple mb-8 text-center",children:"Panel Administrativo"}),e.jsxs("div",{className:"flex justify-center mb-8 flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>d("usuarios"),className:`px-4 py-2 rounded-lg transition ${a==="usuarios"?"bg-knowledge-purple text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"ðŸ‘¥ Usuarios"}),e.jsx("button",{onClick:()=>d("contenido"),className:`px-4 py-2 rounded-lg transition ${a==="contenido"?"bg-knowledge-purple text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"ðŸ“š Contenido"}),e.jsx("button",{onClick:()=>d("estadisticas"),className:`px-4 py-2 rounded-lg transition ${a==="estadisticas"?"bg-knowledge-purple text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"ðŸ“Š EstadÃ­sticas"})]}),a==="usuarios"&&e.jsx(u,{}),a==="contenido"&&e.jsx(b,{}),a==="estadisticas"&&e.jsxs("section",{className:"mt-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-knowledge-purple",children:"EstadÃ­sticas del Sistema"}),c?e.jsx("p",{className:"text-center",children:"Cargando datos..."}):e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-bold text-knowledge-purple",children:"Usuarios"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:s.usuarios})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-bold text-knowledge-purple",children:"Contenidos"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:s.contenidos})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-bold text-knowledge-purple",children:"Promedio progreso"}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[s.promedio_progreso,"%"]})]})]})]})]})};export{y as default};
