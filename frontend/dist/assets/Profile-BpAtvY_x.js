import{r as o,j as e,C as g,L as f,B as j,e as h}from"./index-Bd0lDEMI.js";import{C as y}from"./Card-BLZ6b7c_.js";import{F as i,a as d}from"./FormInput-kT7PvXjE.js";function C(){const[r,l]=o.useState({nombre:"",apellido:"",correo:"",tipo_usuario:""}),[m,u]=o.useState(!1),[a,x]=o.useState({}),[p,n]=o.useState(""),c=JSON.parse(localStorage.getItem("usuario")||"{}");o.useEffect(()=>{(async()=>{try{const t=await h.get(`/auth/me/${c.id}`);l(t.data)}catch(t){console.error("âŒ Error al obtener perfil:",t)}})()},[]);const b=async s=>{s.preventDefault(),x({}),n(""),u(!0);try{await h.put(`/auth/update/${c.id}`,r),n("âœ… Perfil actualizado correctamente.");const t={...c,nombre:r.nombre,apellido:r.apellido,correo:r.correo};localStorage.setItem("usuario",JSON.stringify(t)),setTimeout(()=>n(""),3e3)}catch{x({submit:"âŒ Error al actualizar perfil."})}finally{u(!1)}};return e.jsx(g,{children:e.jsxs("main",{className:"py-8 md:py-12",children:[e.jsxs("section",{className:"text-center mb-12",children:[e.jsx(f,{size:80}),e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-knowledge-purple mt-6 mb-3",children:"Mi Perfil"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-base md:text-lg",children:"Actualiza tu informaciÃ³n personal y mantÃ©n tu perfil al dÃ­a."})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(y,{children:[p&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-green-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-checkmark",children:"âœ…"})," ",p]})}),a.submit&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-red-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-shake",children:"âš ï¸"})," ",a.submit]})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{icon:"ðŸ‘¤",required:!0,children:"Nombre"}),e.jsx(d,{type:"text",placeholder:"Juan",value:r.nombre,onChange:s=>l({...r,nombre:s.target.value}),error:!!a.nombre,helperText:a.nombre,required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{icon:"ðŸ‘¤",required:!0,children:"Apellido"}),e.jsx(d,{type:"text",placeholder:"PÃ©rez",value:r.apellido,onChange:s=>l({...r,apellido:s.target.value}),error:!!a.apellido,helperText:a.apellido,required:!0})]})]}),e.jsxs("div",{children:[e.jsx(i,{icon:"ðŸ“§",required:!0,children:"Correo electrÃ³nico"}),e.jsx(d,{type:"email",placeholder:"tu@correo.com",value:r.correo,onChange:s=>l({...r,correo:s.target.value}),error:!!a.correo,helperText:a.correo||"Este es tu correo registrado",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Rol en la comunidad"}),e.jsx("div",{className:"w-full px-4 py-3 rounded-xl bg-gray-100 border border-gray-300 text-gray-700 font-semibold text-base cursor-not-allowed",children:r.tipo_usuario||"Estudiante"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ“Œ El rol no puede ser modificado"})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsx(j,{variant:"primary",type:"submit",disabled:m,className:"w-full",children:m?"Guardando...":"ðŸ’¾ Guardar Cambios"})})]})]})})]})})}export{C as default};
