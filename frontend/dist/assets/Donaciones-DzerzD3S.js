import{r as s,j as e,C as v,L as y,B as N,d as S}from"./index-Bd0lDEMI.js";import{C}from"./Card-BLZ6b7c_.js";import{F as h,a as F}from"./FormInput-kT7PvXjE.js";import{F as w}from"./FormTextarea-DZyGjP4B.js";import{F as k}from"./FormCheckbox-BGnuvAm2.js";const I=()=>{const[t,m]=s.useState(""),[l,c]=s.useState(""),[r,d]=s.useState(!1),[u,x]=s.useState(!1),[o,n]=s.useState({}),[p,i]=s.useState(""),b=localStorage.getItem("token")||"",g=JSON.parse(localStorage.getItem("usuario")||"{}"),j=()=>{const a={};return(!t||parseFloat(t)<=0)&&(a.monto="Por favor ingresa un monto v√°lido (mayor a 0)"),parseFloat(t)<1&&(a.monto="El monto m√≠nimo es $1.00"),n(a),Object.keys(a).length===0},f=async a=>{if(a.preventDefault(),i(""),n({}),!!j())try{x(!0),await S.post("http://localhost:5000/api/donaciones",{id_usuario:g.id,monto:parseFloat(t),metodo_pago:"transferencia",mensaje_donante:l,anonima:r},{headers:{Authorization:`Bearer ${b}`}}),i("üíô ¬°Gracias por tu apoyo a Knowledge!"),m(""),c(""),d(!1),setTimeout(()=>i(""),4e3)}catch{n({submit:"Error al procesar la donaci√≥n. Por favor intenta de nuevo."})}finally{x(!1)}};return e.jsx(v,{children:e.jsxs("main",{className:"py-6 md:py-8",children:[e.jsxs("section",{className:"text-center mb-8 md:mb-12 px-4 animate-fade-in",children:[e.jsx(y,{size:60,className:"md:w-20 md:h-20 mx-auto"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-knowledge-purple mt-4 md:mt-6 mb-2 md:mb-3",children:"Apoya el Conocimiento"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-sm md:text-base px-2",children:"Tu donaci√≥n ayuda a mantener y mejorar nuestra plataforma educativa. Cada aporte cuenta. üíô"})]}),e.jsx("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxs(C,{children:[p&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-green-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-checkmark",children:"üíô"})," ",p]})}),o.submit&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-red-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-shake",children:"‚ö†Ô∏è"})," ",o.submit]})}),e.jsxs("form",{onSubmit:f,className:"space-y-5 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{icon:"üí≥",required:!0,children:"Monto (USD)"}),e.jsx(F,{type:"number",min:"0.01",step:"0.01",placeholder:"Ej: 25.00",value:t,onChange:a=>m(a.target.value),error:o.monto,helperText:o.monto||"Contribuye el monto que desees",required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{icon:"üí¨",children:"Mensaje (opcional)"}),e.jsx(w,{placeholder:"Cu√©ntanos por qu√© apoyas Knowledge...",value:l,onChange:a=>c(a.target.value),rows:4,helperText:"Comparte tu inspiraci√≥n con nuestra comunidad"})]}),e.jsx(k,{id:"anonima",checked:r,onChange:()=>d(!r),label:"Realizar donaci√≥n an√≥nima",helperText:"Tu nombre no ser√° visible p√∫blicamente"}),e.jsx(N,{variant:"primary",type:"submit",disabled:u,className:"w-full min-h-12 text-base",children:u?"‚è≥ Procesando...":"üíô Donar Ahora"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-blue-800 text-sm md:text-base",children:e.jsxs("p",{children:[e.jsx("strong",{children:"‚ÑπÔ∏è Seguridad:"})," Usamos m√©todos de pago seguros encriptados. Tu informaci√≥n personal est√° protegida en todo momento."]})})]})]})})]})})};export{I as default};
