import{j as e,r,C as q,L,b as M,c as S,s as T}from"./index-Bd0lDEMI.js";import{C as b}from"./Card-BLZ6b7c_.js";import{L as C}from"./Loader-BnLytqHI.js";import{F as f,a as $}from"./FormInput-kT7PvXjE.js";import{F as z}from"./FormTextarea-DZyGjP4B.js";import{F as A}from"./FormSubmitButton-D7msHVkw.js";function B({icon:l,error:a,helperText:i,label:p,options:m,className:u,...o}){return e.jsxs("div",{className:"mb-5",children:[p&&e.jsxs("label",{className:"flex items-center gap-2 text-white font-semibold mb-3 text-sm md:text-base cursor-pointer",children:[l&&e.jsx("span",{className:"text-xl md:text-2xl flex-shrink-0","aria-hidden":!0,children:l}),e.jsx("span",{children:p})]}),e.jsxs("div",{className:`relative ${a?"mb-2":""}`,children:[e.jsx("select",{...o,className:`w-full px-4 py-3 rounded-xl bg-white text-black text-base font-medium focus:outline-none focus:ring-2 focus:ring-knowledge-purple focus:ring-offset-2 focus:ring-offset-white transition-all duration-300 shadow-sm hover:shadow-md focus:shadow-lg appearance-none cursor-pointer ${a?"border-2 border-red-400 focus:ring-red-500 focus:ring-offset-red-50":"border border-gray-200 focus:border-knowledge-purple hover:border-gray-300"} ${u||""}`,children:m.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),e.jsx("svg",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),a&&e.jsxs("p",{className:"text-red-300 text-xs md:text-sm font-medium mt-1 flex items-center gap-1",children:[e.jsx("span",{"aria-hidden":!0,children:"‚ö†Ô∏è"})," ",a]}),i&&!a&&e.jsx("p",{className:"text-purple-200 text-xs md:text-sm mt-1",children:i})]})}const H=()=>{const[l,a]=r.useState([]),[i,p]=r.useState([]),[m,u]=r.useState(0),[o,d]=r.useState(null),[N,y]=r.useState(!0),[F,w]=r.useState(!1),[c,j]=r.useState({}),[k,v]=r.useState(""),[n,h]=r.useState({titulo:"",descripcion:"",tipo:"video",nivel_dificultad:"principiante"}),g=JSON.parse(localStorage.getItem("usuario")||"{}");r.useEffect(()=>{(async()=>{try{y(!0);const t=await M(g.id),x=await S(g.id);p(t),a(x)}catch(t){console.error("Error al cargar datos:",t)}finally{y(!1)}})()},[]);const D=()=>{const s={};return n.titulo.trim()||(s.titulo="El t√≠tulo es requerido"),o||(s.archivo="Debes seleccionar un archivo"),j(s),Object.keys(s).length===0},E=async s=>{if(s.preventDefault(),j({}),v(""),!D())return;const t=new FormData;Object.entries(n).forEach(([x,P])=>t.append(x,P)),o&&t.append("archivo",o),t.append("id_autor",g.id);try{w(!0),await T(t,u),v("‚úÖ Contenido enviado para revisi√≥n."),h({titulo:"",descripcion:"",tipo:"video",nivel_dificultad:"principiante"}),d(null),u(0);const x=await S(g.id);a(x),setTimeout(()=>v(""),4e3)}catch{j({submit:"Error al subir contenido. Intenta de nuevo."}),u(0)}finally{w(!1)}};return e.jsx(q,{children:e.jsxs("main",{className:"py-6 md:py-8",children:[e.jsxs("section",{className:"text-center mb-8 md:mb-12 px-4 animate-fade-in",children:[e.jsx(L,{size:60,className:"mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-knowledge-purple mt-4 md:mt-6 mb-2 md:mb-3",children:"Mi Panel"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-sm md:text-base px-2",children:"Sube videos, documentos y cursos para compartir con la comunidad Knowledge."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8 mb-8 md:mb-12 px-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b,{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-knowledge-purple mb-6",children:"üì§ Nuevo Contenido"}),k&&e.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-green-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-checkmark",children:"‚úÖ"})," ",k]})}),c.submit&&e.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-lg animate-scale-in",children:e.jsxs("p",{className:"text-red-700 font-semibold flex items-center gap-2",children:[e.jsx("span",{className:"animate-shake",children:"‚ö†Ô∏è"})," ",c.submit]})}),e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(f,{icon:"üìù",required:!0,children:"T√≠tulo"}),e.jsx($,{placeholder:"T√≠tulo del contenido",value:n.titulo,onChange:s=>h({...n,titulo:s.target.value}),error:c.titulo,helperText:c.titulo||"S√© claro y descriptivo",required:!0})]}),e.jsxs("div",{children:[e.jsx(f,{icon:"üìã",children:"Descripci√≥n"}),e.jsx(z,{placeholder:"Describe tu contenido",rows:3,value:n.descripcion,onChange:s=>h({...n,descripcion:s.target.value}),helperText:"Ayuda a otros a entender de qu√© trata"})]}),e.jsxs("div",{children:[e.jsx(f,{icon:"üéØ",required:!0,children:"Tipo"}),e.jsx(B,{value:n.tipo,onChange:s=>h({...n,tipo:s.target.value}),options:[{value:"video",label:"üìπ Video"},{value:"pdf",label:"üìÑ PDF"},{value:"curso",label:"üéì Curso"}],required:!0})]}),e.jsxs("div",{children:[e.jsx(f,{icon:"üìé",required:!0,children:"Archivo"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"video/mp4,application/pdf",onChange:s=>d(s.target.files?.[0]||null),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",required:!0}),e.jsx("div",{className:"w-full px-4 py-3 rounded-xl bg-white border-2 border-dashed border-gray-300 hover:border-knowledge-purple transition-colors",children:e.jsx("p",{className:"text-gray-600 text-sm text-center",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-semibold text-knowledge-purple",children:["‚úÖ ",o.name]}),e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-gray-500",children:[(o.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"block font-semibold text-gray-700",children:"Haz clic para seleccionar"}),e.jsx("span",{className:"text-xs text-gray-500",children:"MP4 o PDF (m√°x 500 MB)"})]})})})]}),c.archivo&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:c.archivo})]}),m>0&&e.jsx("div",{className:"w-full bg-gray-300 rounded-full overflow-hidden mt-2",children:e.jsxs("div",{className:"bg-gradient-to-r from-knowledge-green to-knowledge-purple text-xs text-white text-center py-1 transition-all duration-300",style:{width:`${m}%`},children:[m,"%"]})}),e.jsx(A,{type:"submit",loading:F,icon:"üì§",children:"Enviar Contenido"})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:N?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(C,{})}):e.jsxs(b,{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-knowledge-purple mb-6",children:"üìä Tu Progreso"}),i&&i.length>0?e.jsx("div",{className:"space-y-4",children:i.map((s,t)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-knowledge-purple transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:s.titulo||"Contenido"}),e.jsxs("span",{className:"text-sm text-knowledge-green font-bold",children:[s.progreso||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2",children:e.jsx("div",{className:"bg-knowledge-green rounded-full h-2 transition-all",style:{width:`${s.progreso||0}%`}})})]},t))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No hay progreso registrado a√∫n."})]})})]}),e.jsxs("section",{className:"px-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-knowledge-purple mb-6",children:"üìö Mi Contenido"}),N?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(C,{})}):l&&l.length>0?e.jsx("div",{className:"grid gap-5 md:gap-6 sm:grid-cols-2 lg:grid-cols-3 stagger-container",children:l.map((s,t)=>e.jsxs(b,{className:`animate-fade-in-delay-${t%3+1}`,children:[e.jsx("h3",{className:"font-semibold text-knowledge-purple text-lg mb-2",children:s.titulo}),e.jsx("p",{className:"text-gray-700 mb-3 text-sm",children:s.descripcion}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Tipo: ",e.jsx("span",{className:"font-semibold",children:s.tipo})]}),s.estado==="aprobado"&&e.jsx("span",{className:"text-xs text-knowledge-green font-bold bg-green-50 px-3 py-1 rounded-full",children:"‚úÖ Aprobado"}),s.estado==="pendiente"&&e.jsx("span",{className:"text-xs text-yellow-600 font-bold bg-yellow-50 px-3 py-1 rounded-full",children:"‚è≥ Pendiente"}),s.estado==="rechazado"&&e.jsx("span",{className:"text-xs text-red-600 font-bold bg-red-50 px-3 py-1 rounded-full",children:"‚ùå Rechazado"})]})]},s.id_contenido))}):e.jsx(b,{children:e.jsx("p",{className:"text-center py-12 text-gray-500",children:"A√∫n no has subido contenido. ¬°S√© el primero en compartir! üöÄ"})})]})]})})};export{H as default};
